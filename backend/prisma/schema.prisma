// 1. Définition du client
generator client {
  provider = "prisma-client-js"
}

// 2. Définition de la base de données SQLite
datasource db {
  provider = "sqlite"
  url      = "file:./prisma/sqlite/dev.db"
}

// 3. Modèles

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  pseudo    String
  avatarUrl String?
  status    String?
  password  String?
  createdAt DateTime @default(now())

  // Friends (relation many-to-many implicite)
  friends  User[] @relation("UserFriends")
  friendOf User[] @relation("UserFriends")

  // Friend requests
  sentRequests     FriendRequest[] @relation("SentRequests")
  receivedRequests FriendRequest[] @relation("ReceivedRequests")
}

model FriendRequest {
  id         Int  @id @default(autoincrement())
  fromUser   User @relation("SentRequests", fields: [fromUserId], references: [id])
  fromUserId Int

  toUser   User @relation("ReceivedRequests", fields: [toUserId], references: [id])
  toUserId Int

  status    String   @default("pending") // "pending", "accepted", "declined"
  createdAt DateTime @default(now())
}
